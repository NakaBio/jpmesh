<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Utilities for Japanese Mesh Code &bull; jpmesh</title><!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous"><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet"><script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">jpmesh</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="articles/index.html">Articles</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/uribo/jpmesh">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="jpmesh" class="section level1">


<p><em>English version of README is <a href="https://github.com/uribo/jpmesh/blob/master/README.en.md">here</a></em></p>
<div id="overview" class="section level2">
<h2 class="hasAnchor"><a href="#overview" class="anchor"> </a>Overview</h2>
<p><strong><code>{jpmesh}</code></strong>&#12497;&#12483;&#12465;&#12540;&#12472;&#12399;&#12289;&#26085;&#26412;&#22269;&#20869;&#12391;&#21033;&#29992;&#12373;&#12428;&#12427;&#12300;&#22320;&#22495;&#12513;&#12483;&#12471;&#12517;&#65288;&#12513;&#12483;&#12471;&#12517;&#12467;&#12540;&#12489;&#65289;&#12301;&#12434;R&#12363;&#12425;&#23481;&#26131;&#12395;&#21033;&#29992;&#21487;&#33021;&#12395;&#12377;&#12427;&#12497;&#12483;&#12465;&#12540;&#12472;&#12391;&#12377;&#12290;&#22320;&#22495;&#12513;&#12483;&#12471;&#12517;&#12392;&#12399;&#12289;&#26085;&#26412;&#22269;&#22303;&#12434;&#32239;&#24230;&#12539;&#32076;&#24230;&#12395;&#12424;&#12426;&#26041;&#24418;&#12398;&#23567;&#22320;&#22495;&#21306;&#30011;&#12395;&#32048;&#20998;&#12375;&#12383;&#38555;&#12395;&#19982;&#12360;&#12425;&#12428;&#12427;&#12467;&#12540;&#12489;&#12391;&#12377;&#12290;&#22320;&#22495;&#12513;&#12483;&#12471;&#12517;&#12399;&#12467;&#12540;&#12489;&#12398;&#31934;&#24230;&#12395;&#24540;&#12376;&#12390;&#31684;&#22258;&#12392;&#12377;&#12427;&#21306;&#30011;&#12398;&#38754;&#31309;&#12364;&#30064;&#12394;&#12387;&#12390;&#12362;&#12426;&#12289;&#32113;&#35336;&#35519;&#26619;&#12394;&#12393;&#12391;&#12399;&#21516;&#19968;&#12513;&#12483;&#12471;&#12517;&#12434;&#25505;&#29992;&#12377;&#12427;&#12371;&#12392;&#12391;&#24195;&#12356;&#38754;&#31309;&#12398;&#35519;&#26619;&#32080;&#26524;&#12434;&#22320;&#22495;&#12513;&#12483;&#12471;&#12517;&#21336;&#20301;&#12391;&#21462;&#12426;&#25201;&#12360;&#12427;&#12424;&#12358;&#12395;&#12394;&#12426;&#12414;&#12377;&#12290;</p>
<p><strong><code>{jpmesh}</code></strong>&#12399;&#29694;&#22312;&#12289;&#27161;&#28310;&#22320;&#22495;&#12513;&#12483;&#12471;&#12517;&#12391;&#12354;&#12427;&#31532;1&#27425;&#12513;&#12483;&#12471;&#12517;&#12363;&#12425;&#20998;&#21106;&#22320;&#22495;&#12513;&#12483;&#12471;&#12517;&#12398;4&#20998;&#12398;1&#22320;&#22495;&#12513;&#12483;&#12471;&#12517;&#12377;&#12394;&#12431;&#12385;80km&#12363;&#12425;250m&#12414;&#12391;&#12398;&#12513;&#12483;&#12471;&#12517;&#12467;&#12540;&#12489;&#12395;&#23550;&#24540;&#12375;&#12289;&#12513;&#12483;&#12471;&#12517;&#12467;&#12540;&#12489;&#12392;&#32239;&#24230;&#32076;&#24230;&#24231;&#27161;&#12392;&#12398;&#20114;&#25563;&#12434;&#34892;&#12356;&#12414;&#12377;&#12290;&#20027;&#12394;&#27231;&#33021;&#12392;&#12375;&#12390;&#12289;&#12300;&#32239;&#24230;&#32076;&#24230;&#12363;&#12425;&#12398;&#22320;&#22495;&#12513;&#12483;&#12471;&#12517;&#12408;&#12398;&#22793;&#25563;&#12301;&#12289;&#12300;&#22320;&#22495;&#12513;&#12483;&#12471;&#12517;&#12363;&#12425;&#12398;&#32239;&#24230;&#32076;&#24230;&#12398;&#21462;&#24471;&#12301;&#12289;&#12300;&#37117;&#36947;&#24220;&#30476;&#21336;&#20301;&#12420;leaflet&#19978;&#12408;&#12398;&#12510;&#12483;&#12500;&#12531;&#12464;&#12301;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor"><a href="#installation" class="anchor"> </a>Installation</h2>
<p>&#12497;&#12483;&#12465;&#12540;&#12472;&#12399;GitHub&#32076;&#30001;&#12391;&#12452;&#12531;&#12473;&#12488;&#12540;&#12523;&#21487;&#33021;&#12391;&#12377;&#12290;</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># the development version from GitHub:</span>
<span class="kw">install.packages</span>(<span class="st">"devtools"</span>)
devtools::<span class="kw">install_github</span>(<span class="st">"uribo/jpmesh"</span>)</code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor"><a href="#usage" class="anchor"> </a>Usage</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(jpmesh)
<span class="kw">library</span>(dplyr, <span class="dt">warn.conflicts =</span> <span class="ot">FALSE</span>)
<span class="kw">library</span>(ggplot2)</code></pre></div>
<div id="convert-mesh-code-to-coordinate-and-vice-versa" class="section level3">
<h3 class="hasAnchor"><a href="#convert-mesh-code-to-coordinate-and-vice-versa" class="anchor"> </a>Convert mesh code to coordinate and vice versa</h3>
<p>&#12513;&#12483;&#12471;&#12517;&#12467;&#12540;&#12489;&#12363;&#12425;&#12513;&#12483;&#12471;&#12517;&#31684;&#22258;&#29305;&#23450;&#12398;&#12383;&#12417;&#12398;&#32239;&#24230;&#32076;&#24230;&#12398;&#21462;&#24471;</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/meshcode_to_latlon.html">meshcode_to_latlon</a></span>(<span class="dv">5133</span>)
<span class="co">#&gt;   lat_center long_center lat_error long_error</span>
<span class="co">#&gt; 1   34.33333       133.5 0.3333333        0.5</span>
<span class="kw"><a href="reference/meshcode_to_latlon.html">meshcode_to_latlon</a></span>(<span class="dv">513377</span>)
<span class="co">#&gt;   lat_center long_center  lat_error long_error</span>
<span class="co">#&gt; 1     34.625    133.9375 0.04166667     0.0625</span>
<span class="kw"><a href="reference/meshcode_to_latlon.html">meshcode_to_latlon</a></span>(<span class="dv">51337783</span>)
<span class="co">#&gt;   lat_center long_center   lat_error long_error</span>
<span class="co">#&gt; 1   34.65417    133.9187 0.004166667    0.00625</span></code></pre></div>
<p>&#32239;&#24230;&#32076;&#24230;&#12363;&#12425;&#12289;&#31684;&#22258;&#20869;&#12398;&#12513;&#12483;&#12471;&#12517;&#12467;&#12540;&#12489;&#12434;&#21462;&#24471;</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/latlong_to_meshcode.html">latlong_to_meshcode</a></span>(<span class="dv">34</span>, <span class="dv">133</span>, <span class="dt">order =</span> <span class="dv">1</span>)
<span class="co">#&gt; [1] 5133</span>
<span class="kw"><a href="reference/latlong_to_meshcode.html">latlong_to_meshcode</a></span>(<span class="fl">34.583333</span>, <span class="fl">133.875</span>, <span class="dt">order =</span> <span class="dv">2</span>)
<span class="co">#&gt; [1] 513367</span>
<span class="kw"><a href="reference/latlong_to_meshcode.html">latlong_to_meshcode</a></span>(<span class="fl">34.65</span>, <span class="fl">133.9125</span>, <span class="dt">order =</span> <span class="dv">3</span>)
<span class="co">#&gt; [1] 51337782</span></code></pre></div>
</div>
<div id="detect-fine-mesh-code" class="section level3">
<h3 class="hasAnchor"><a href="#detect-fine-mesh-code" class="anchor"> </a>Detect fine mesh code</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/detect_mesh.html">detect_mesh</a></span>(<span class="dv">52350422</span>, <span class="dt">lat =</span> <span class="fl">34.684176</span>, <span class="dt">long =</span> <span class="fl">135.526130</span>)
<span class="co">#&gt; [1] 523504221</span>
<span class="kw"><a href="reference/detect_mesh.html">detect_mesh</a></span>(<span class="dv">523504221</span>, <span class="dt">lat =</span> <span class="fl">34.684028</span>, <span class="dt">long =</span> <span class="fl">135.529506</span>)
<span class="co">#&gt; [1] 5235042212</span></code></pre></div>
</div>
<div id="utilies" class="section level3">
<h3 class="hasAnchor"><a href="#utilies" class="anchor"> </a>Utilies</h3>
<p>1&#27425;&#12513;&#12483;&#12471;&#12517;&#12434;&#22522;&#30990;&#12392;&#12375;&#12383;&#21336;&#32020;&#21270;&#12375;&#12383;&#26085;&#26412;&#22320;&#22259;&#12398;&#25551;&#30011;</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">"jpnrect"</span>)

<span class="kw">ggplot</span>() +
<span class="st">  </span><span class="kw">geom_map</span>(<span class="dt">data =</span> jpnrect,
           <span class="dt">map  =</span> jpnrect,
           <span class="kw">aes</span>(<span class="dt">x =</span> long, <span class="dt">y =</span> lat, <span class="dt">map_id =</span> id),
           <span class="dt">fill =</span> <span class="st">"#FFFFFF"</span>, <span class="dt">color =</span> <span class="st">"black"</span>,
           <span class="dt">size =</span> <span class="dv">1</span>) +
<span class="st">  </span><span class="kw">coord_map</span>() +
<span class="st">  </span>ggthemes::<span class="kw">theme_map</span>() +
<span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">x =</span> longitude, <span class="dt">y =</span> latitude, <span class="dt">label =</span> abb_name), <span class="dt">data =</span> jpnrect, <span class="dt">size =</span> <span class="dv">3</span>)</code></pre></div>
<p><img src="README-jpn_simple_map-1.png" width="768"></p>
<p>&#37117;&#36947;&#24220;&#30476;&#21029;&#12398;&#12513;&#12483;&#12471;&#12517;&#12467;&#12540;&#12489;&#12487;&#12540;&#12479;</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/pref_mesh.html">pref_mesh</a></span>(<span class="dv">33</span>) %&gt;%<span class="st"> </span><span class="kw">head</span>() %&gt;%<span class="st"> </span>knitr::<span class="kw">kable</span>()</code></pre></div>
<table class="table"><thead><tr class="header"><th align="left">jiscode</th>
<th align="right">long</th>
<th align="right">lat</th>
<th align="right">order</th>
<th align="left">group</th>
<th align="right">id</th>
<th align="left">city_code</th>
<th align="left">city_name</th>
</tr></thead><tbody><tr class="odd"><td align="left">33</td>
<td align="right">133.5250</td>
<td align="right">34.30000</td>
<td align="right">1</td>
<td align="left">51333452.1</td>
<td align="right">51333452</td>
<td align="left">33205</td>
<td align="left">&#31520;&#23713;&#24066;</td>
</tr><tr class="even"><td align="left">33</td>
<td align="right">133.5375</td>
<td align="right">34.30000</td>
<td align="right">2</td>
<td align="left">51333452.1</td>
<td align="right">51333452</td>
<td align="left">33205</td>
<td align="left">&#31520;&#23713;&#24066;</td>
</tr><tr class="odd"><td align="left">33</td>
<td align="right">133.5375</td>
<td align="right">34.29167</td>
<td align="right">3</td>
<td align="left">51333452.1</td>
<td align="right">51333452</td>
<td align="left">33205</td>
<td align="left">&#31520;&#23713;&#24066;</td>
</tr><tr class="even"><td align="left">33</td>
<td align="right">133.5250</td>
<td align="right">34.29167</td>
<td align="right">4</td>
<td align="left">51333452.1</td>
<td align="right">51333452</td>
<td align="left">33205</td>
<td align="left">&#31520;&#23713;&#24066;</td>
</tr><tr class="odd"><td align="left">33</td>
<td align="right">133.5250</td>
<td align="right">34.30000</td>
<td align="right">5</td>
<td align="left">51333452.1</td>
<td align="right">51333452</td>
<td align="left">33205</td>
<td align="left">&#31520;&#23713;&#24066;</td>
</tr><tr class="even"><td align="left">33</td>
<td align="right">133.5250</td>
<td align="right">34.30833</td>
<td align="right">1</td>
<td align="left">51333462.1</td>
<td align="right">51333462</td>
<td align="left">33205</td>
<td align="left">&#31520;&#23713;&#24066;</td>
</tr></tbody></table><p>&#21487;&#35222;&#21270;&#12398;&#19968;&#20363;</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># For leaflet</span>
<span class="co"># pref_mesh(33) %&gt;% mesh_rectangle(mesh_code = "id", view = TRUE)</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df.map &lt;-<span class="st"> </span><span class="kw"><a href="reference/pref_mesh.html">pref_mesh</a></span>(<span class="dv">33</span>) %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">mesh_area =</span> purrr::<span class="kw">map</span>(id, meshcode_to_latlon)) %&gt;%<span class="st"> </span>
<span class="st">  </span>tidyr::<span class="kw">unnest</span>() %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">lng1 =</span> long_center -<span class="st"> </span>long_error,
         <span class="dt">lat1 =</span> lat_center -<span class="st"> </span>lat_error,
         <span class="dt">lng2 =</span> long_center +<span class="st"> </span>long_error,
         <span class="dt">lat2 =</span> lat_center +<span class="st"> </span>lat_error)

<span class="kw">ggplot</span>() +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="dt">data =</span> df.map, 
           <span class="dt">map =</span> df.map,
           <span class="kw">aes</span>(<span class="dt">x =</span> long, <span class="dt">y =</span> lat, <span class="dt">map_id =</span> id), 
           <span class="dt">fill =</span> <span class="st">"white"</span>, <span class="dt">color =</span> <span class="st">"black"</span>) +<span class="st"> </span>
<span class="st">  </span><span class="kw">coord_map</span>(<span class="dt">projection =</span> <span class="st">"mercator"</span>)</code></pre></div>
<p><img src="README-mesh_pref33_map-1.png" width="672"></p>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Links</h2><ul class="list-unstyled"><li>Download from CRAN at <br><a href="https://cran.r-project.org/package=jpmesh">https://&#8203;cran.r-project.org/&#8203;package=jpmesh</a></li>
<li>Browse source code at <br><a href="https://github.com/uribo/jpmesh">https://&#8203;github.com/&#8203;uribo/&#8203;jpmesh</a></li>
<li>Report a bug at <br><a href="https://github.com/uribo/jpmesh/issues">https://&#8203;github.com/&#8203;uribo/&#8203;jpmesh/&#8203;issues</a></li>
<li>Useful links at <br><a href="http://www.gis-tool.com/mapview/areameshmap.html">http://&#8203;www.gis-tool.com/&#8203;mapview/&#8203;areameshmap.html</a></li>
</ul><h2>License</h2>
<p><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE">LICENSE</a></p>
<h2>Developers</h2><ul class="list-unstyled"><li>Shinya Uryu <br><small class="roles"> Author, maintainer </small> </li>
</ul><html><body><h2>Dev status</h2><ul class="list-unstyled"><li><a href="https://travis-ci.org/uribo/jpmesh">
  <img src="https://travis-ci.org/uribo/jpmesh.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://cran.r-project.org/package=jpmesh">
  <img src="http://www.r-pkg.org/badges/version/jpmesh" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://codecov.io/gh/uribo/jpmesh">
  <img src="https://codecov.io/gh/uribo/jpmesh/branch/master/graph/badge.svg" alt="codecov"></a></li>
</ul></body></html></div>

</div>


      <footer><div class="copyright">
  <p>Developed by Shinya Uryu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer></div>

  </body></html>
